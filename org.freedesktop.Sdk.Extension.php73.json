{
	"id": "org.freedesktop.Sdk.Extension.php73",
	"branch": "18.08",
	"runtime": "org.freedesktop.Sdk",
	"build-extension": true,
	"sdk": "org.freedesktop.Sdk",
	"runtime-version": "18.08",
	"sdk-extensions": [],
	"separate-locales": false,
	"appstream-compose": false,
	"cleanup": [
		"/share/info",
		"/share/man",
		"*.a",
		"*.la"
	],
	"build-options": {
		"no-debuginfo": true,
		"strip": true,
		"prefix": "/usr/lib/sdk/php73"
	},
	"modules": [
		{
			"name": "libzip",
			"buildsystem": "cmake-ninja",
			"sources": [
				{
					"type": "archive",
					"url": "https://libzip.org/download/libzip-1.5.2.tar.gz",
					"sha256": "be694a4abb2ffe5ec02074146757c8b56084dbcebf329123c84b205417435e15"
				}
			]
		},
		{
			"name": "php",
			"buildsystem": "autotools",
			"config-opts": [
				"--disable-cgi",
				"--enable-calendar",
				"--enable-dba=shared",
				"--enable-bcmath",
				"--enable-bz2",
				"--enable-ctype",
				"--enable-curl",
				"--enable-date",
				"--enable-dba",
				"--enable-dom",
				"--enable-enchant",
				"--enable-exif",
				"--enable-fileinfo",
				"--enable-filter",
				"--enable-ftp",
				"--enable-gd",
				"--enable-gettext",
				"--enable-gmp",
				"--enable-hash",
				"--enable-iconv",
				"--enable-imap",
				"--enable-intl",
				"--enable-json",
				"--enable-ldap",
				"--enable-libxml",
				"--enable-mbstring",
				"--enable-mysqli",
				"--enable-mysqlnd",
				"--enable-opcache",
				"--enable-openssl",
				"--enable-pcntl",
				"--enable-pcre",
				"--enable-pdo",
				"--enable-pdo_mysql",
				"--enable-pdo_pgsql",
				"--enable-pdo_sqlite",
				"--enable-phar",
				"--enable-phpdbg",
				"--enable-posix",
				"--enable-pspell",
				"--enable-re2c-cgoto",
				"--enable-readline",
				"--enable-recode",
				"--enable-reflection",
				"--enable-session",
				"--enable-simplexml",
				"--enable-snmp",
				"--enable-sockets",
				"--enable-sodium",
				"--enable-sqlite3",
				"--enable-sysvmsg",
				"--enable-sysvmem",
				"--enable-sysvshm",
				"--enable-tidy",
				"--enable-tokenizer",
				"--enable-wddx",
				"--enable-xml",
				"--enable-xmlreader",
				"--enable-xmlrpc",
				"--enable-xmlwriter",
				"--enable-xsl",
				"--enable-zlib",
				"--with-argon2",
				"--with-config-file-scan-dir=/usr/lib/sdk/php73/lib/ini:${HOME}/.config/php/7.3/ini",
				"--with-curl",
				"--with-gd",
				"--with-libzip",
				"--with-openssl",
				"--with-tsrm-pthreads",
				"--with-zlib"
			],
			"post-install": [
				"install -Dm644 php.ini-development ${FLATPAK_DEST}/lib/php.ini"
			],
			"sources": [
				{
					"type": "archive",
					"url": "https://www.php.net/distributions/php-7.3.7.tar.gz",
					"sha256": "4230bbc862df712b013369de94b131eddea1e5e946a8c5e286b82d441c313328"
				}
			]
		},
		{
			"name":"xdebug",
			"buildsystem":"autotools",
			"config-opts": [
				"--with-php-config=/usr/lib/sdk/php73/bin/php-config"
			],
			"post-install": [
				"install -Dm755 modules/xdebug.so ${FLATPAK_DEST}/lib/php/extensions/no-debug-non-zts-20180731/xdebug.so",
				"install -Dm644 xdebug.ini ${FLATPAK_DEST}/lib/ini/xdebug.ini"
				],
			"sources":[
				{
					"type":"archive",
					"url":"http://xdebug.org/files/xdebug-2.7.2.tgz",
					"sha256":"b0f3283aa185c23fcd0137c3aaa58554d330995ef7a3421e983e8d018b05a4a6"
				},
				{
					"type":"file",
					"path":"xdebug.ini"
				},
				{
					"type": "script",
					"dest-filename": "autogen.sh",
					"commands": [ "${FLATPAK_DEST}/bin/phpize" ]
				}
			]
		},
		{
			"name": "composer",
			"buildsystem": "simple",
			"build-commands": [
				"install -Dm755 composer.phar ${FLATPAK_DEST}/bin/composer"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://getcomposer.org/download/1.8.6/composer.phar",
					"sha256": "b66f9b53db72c5117408defe8a1e00515fe749e97ce1b0ae8bdaa6a5a43dd542"
				}
			]
		},
		{
 			"name": "appdata",
		        "buildsystem": "simple",
		        "build-commands": [
                		"mkdir -p ${FLATPAK_DEST}/share/appdata",
		                "cp org.freedesktop.Sdk.Extension.php73.appdata.xml ${FLATPAK_DEST}/share/appdata",
		                "appstream-compose --basename=org.freedesktop.Sdk.Extension.php73 --prefix=${FLATPAK_DEST} --origin=flatpak org.freedesktop.Sdk.Extension.php73"
		        ],
		        "sources": [
		                {
                			"type": "file",
			                "path": "org.freedesktop.Sdk.Extension.php73.appdata.xml"
		                }
		        ]
		},
		{
			"name":"scripts",
			"buildsystem":"simple",
			"build-commands":[
				"install -Dm755 enable.sh ${FLATPAK_DEST}/enable.sh",
				"install -Dm644 LICENSE.txt ${FLATPAK_DEST}/LICENSE.txt"
			],
			"sources":[
				{
				    "type":"script",
				    "commands":[
				        "export PATH=$PATH:/usr/lib/sdk/php73/bin"
				    ],
				    "dest-filename":"enable.sh"
				},
				{
				    "type":"file",
				    "path":"LICENSE.txt"
				}
			]
		}
	]
}
