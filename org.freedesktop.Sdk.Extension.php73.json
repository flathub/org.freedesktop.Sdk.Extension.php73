{
	"id": "org.freedesktop.Sdk.Extension.php73",
	"branch": "19.08",
	"runtime": "org.freedesktop.Sdk",
	"build-extension": true,
	"sdk": "org.freedesktop.Sdk",
	"runtime-version": "19.08",
	"sdk-extensions": [],
	"separate-locales": false,
	"appstream-compose": false,
	"cleanup": [
		"/share/info",
		"/share/man",
		"/include",
		"*.a",
		"*.la"
	],
	"build-options": {
		"no-debuginfo": true,
		"strip": true,
		"prefix": "/usr/lib/sdk/php73",
		"append-pkg-config-path": "/usr/lib/sdk/php73/lib/pkgconfig"
	},
	"modules": [
		{
			"name": "libzip",
			"buildsystem": "cmake-ninja",
			"sources": [
				{
					"type": "archive",
					"url": "https://libzip.org/download/libzip-1.5.2.tar.gz",
					"sha256": "be694a4abb2ffe5ec02074146757c8b56084dbcebf329123c84b205417435e15"
				}
			],
			"post-install": [
				"install -Dm644 LICENSE ${FLATPAK_DEST}/share/licenses/libzip/LICENSE"
			]
		},
		{
			"name": "php",
			"buildsystem": "autotools",
			"config-opts": [
				"--enable-option-checking=fatal",
				"--disable-cgi",
				"--enable-calendar",
				"--enable-dba=shared",
				"--enable-bcmath",
				"--enable-bz2",
				"--enable-ctype",
				"--enable-curl",
				"--enable-date",
				"--enable-dba",
				"--enable-dom",
				"--enable-enchant",
				"--enable-exif",
				"--enable-fileinfo",
				"--enable-filter",
				"--enable-ftp",
				"--enable-gd",
				"--enable-gettext",
				"--enable-gmp",
				"--enable-hash",
				"--enable-iconv",
				"--enable-imap",
				"--enable-intl",
				"--enable-json",
				"--enable-ldap",
				"--enable-libxml",
				"--enable-mbstring",
				"--enable-mysqli",
				"--enable-mysqlnd",
				"--enable-opcache",
				"--enable-openssl",
				"--enable-pcntl",
				"--enable-pcre",
				"--enable-pdo",
				"--enable-pdo_mysql",
				"--enable-pdo_pgsql",
				"--enable-pdo_sqlite",
				"--enable-phar",
				"--enable-phpdbg",
				"--enable-posix",
				"--enable-pspell",
				"--enable-re2c-cgoto",
				"--enable-readline",
				"--enable-recode",
				"--enable-reflection",
				"--enable-session",
				"--enable-simplexml",
				"--enable-snmp",
				"--enable-sockets",
				"--enable-sodium",
				"--enable-sqlite3",
				"--enable-sysvmsg",
				"--enable-sysvmem",
				"--enable-sysvshm",
				"--enable-tidy",
				"--enable-tokenizer",
				"--enable-wddx",
				"--enable-xml",
				"--enable-xmlreader",
				"--enable-xmlrpc",
				"--enable-xmlwriter",
				"--enable-xsl",
				"--enable-zip",
				"--enable-zlib",
				"--mandir=${FLATPAK_DEST}/share/man",
				"--with-argon2",
				"--with-config-file-scan-dir=${FLATPAK_DEST}/etc/php:/app/etc/php:/var/config/php/7.3/ini",
				"--with-curl",
				"--with-gd",
				"--with-libzip",
				"--with-openssl",
				"--with-tsrm-pthreads",
				"--with-zlib"
			],
			"post-install": [
				"install -Dm644 php.ini-development ${FLATPAK_DEST}/lib/php.ini",
				"install -Dm644 LICENSE ${FLATPAK_DEST}/share/licenses/php/LICENSE"
			],
			"sources": [
				{
					"type": "archive",
					"url": "https://www.php.net/distributions/php-7.3.11.tar.xz",
					"sha256": "657cf6464bac28e9490c59c07a2cf7bb76c200f09cfadf6e44ea64e95fa01021"
				}
			]
		},
		{
			"name":"xdebug",
			"buildsystem":"autotools",
			"config-opts": [
				"--with-php-config=/usr/lib/sdk/php73/bin/php-config"
			],
			"post-install": [
				"install -Dm755 modules/xdebug.so ${FLATPAK_DEST}/lib/php/extensions/no-debug-non-zts-20180731/xdebug.so",
				"install -Dm644 xdebug.ini ${FLATPAK_DEST}/etc/php/xdebug.ini",
				"install -Dm644 LICENSE ${FLATPAK_DEST}/share/licenses/xdebug/LICENSE"
			],
			"sources":[
				{
					"type":"archive",
					"url":"https://xdebug.org/files/xdebug-2.8.0.tgz",
					"sha256":"cb1d117ecbec7409a408cf24e59d92f7e3816fe8e2331dd0ffc3dce60228c264"
				},
				{
					"type":"file",
					"path":"xdebug.ini"
				},
				{
					"type": "shell",
					"commands": [
						"${FLATPAK_DEST}/bin/phpize"
					]
				}
			]
		},
		{
			"name": "composer",
			"buildsystem": "simple",
			"build-commands": [
				"install -Dm755 composer.phar ${FLATPAK_DEST}/bin/composer",
				"install -Dm644 LICENSE ${FLATPAK_DEST}/share/licenses/composer/LICENSE"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://getcomposer.org/download/1.9.1/composer.phar",
					"sha256": "1f210b9037fcf82670d75892dfc44400f13fe9ada7af9e787f93e50e3b764111"
				},
				{
					"type": "git",
					"url": "https://github.com/composer/composer.git",
					"tag": "1.9.1",
					"commit": "bb01f2180df87ce7992b8331a68904f80439dd2f"
				}
			]
		},
		{
 			"name": "appdata",
		        "buildsystem": "simple",
		        "build-commands": [
                		"mkdir -p ${FLATPAK_DEST}/share/appdata",
		                "cp org.freedesktop.Sdk.Extension.php73.appdata.xml ${FLATPAK_DEST}/share/appdata",
		                "appstream-compose --basename=org.freedesktop.Sdk.Extension.php73 --prefix=${FLATPAK_DEST} --origin=flatpak org.freedesktop.Sdk.Extension.php73"
		        ],
		        "sources": [
		                {
                			"type": "file",
			                "path": "org.freedesktop.Sdk.Extension.php73.appdata.xml"
		                }
		        ]
		},
		{
			"name":"scripts",
			"buildsystem":"simple",
			"build-commands":[
				"install -Dm755 enable.sh ${FLATPAK_DEST}/enable.sh"
			],
			"sources":[
				{
				    "type":"script",
				    "commands":[
				        "export PATH=$PATH:/usr/lib/sdk/php73/bin"
				    ],
				    "dest-filename":"enable.sh"
				}
			]
		}
	]
}
